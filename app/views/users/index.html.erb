<div class="page-header">
  <h1>
    Users
  </h1>
</div>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>Email</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Admin?</th>
        <th>Actions</th>
      </tr>

      <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.first_name %></td>
        <td><%= user.last_name %></td>
        <td><%= user.admin? %></td>
        <td>
          <div class="btn-group" role="group" aria-label="...">

            <form action="/update_user/<%= user.id %>" method="post">
              <!-- Hidden input for authenticity token to protect from forgery -->
              <input name="authenticity_token" type="hidden" value="<%= form_authenticity_token %>">

              <% if user.admin? %>
              <button type="submit" class="btn btn-danger">Demote</button>
              <% else %>
              <button type="submit" class="btn btn-success">Promote</button>
              <% end %>
            </form>
          </div>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
